@page
@model AgapayAidSystem.Pages.Disaster.Profile.ReportModel
@{
	ViewData["Title"] = "Report";
}

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.4/html2pdf.bundle.min.js"></script>

<style>
    .table {
        margin: 0 auto; /* Center-align the table */
        text-align: center; /* Left-align the table contents */
        border-radius: 20px;
    }

        .table th {
            vertical-align: middle;
        }

        .table th {
            background: #3F8F8B;
            color: #fff;
        }

    /* Adjust the left-aligned text in the first column */
    .left-aligned {
        text-align: left;
    }

    .report-container {
        display: flex;
        justify-content: space-between;
        padding: 10px;
    }

    .col, .col-auto {
        flex: 1;
    }
</style>

<div class="content" id="makepdf">

    <a class="navbar-brand pb-2">
        <img src="/green-logo-horizontal.png" alt="" height="45" id="logo">
    </a>

    <hr /><br />

    <div class="row">
        <!-- REPORT INFORMATION -->
        <div class="col left-aligned order-1">
            <p><strong>Province:</strong> NCR</p>
            <p><strong>City/Municipality:</strong> Manila</p>
            <p><strong>Report Number:</strong> 00001</p>
        </div>
        <div class="col-auto left-aligned order-2">
            <p><strong>Date of Report Generated:</strong> 01/11/2021</p>
            <p><strong>Time of Report Generated:</strong> 10:18:20</p>
            <p><strong>Generated by:</strong> John Doe</p>
        </div>
    </div>

    <br />

    <!--DISASTER INFORMATION-->
    <div>
        <h4 class="pb-2"><strong>DISASTER INFORMATION:</strong></h4>


        <p>
            <strong>Name:</strong>
            Gaya Gaya Fire
        </p>
        <p>
            <strong>Type:</strong>
            Fire
        </p>
        <p>
            <strong>Description:</strong>
            Caused due to LPG Tank
        </p>
        <p>
            <strong>Date Occurred:</strong>
            12/29/2020
        </p>
    </div>

    <br />

    <div>
        <h4 class="pb-2"><strong>STATUS OF DISASTER:</strong></h4>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th class="center-header" rowspan="4">AFFECTED BARANGAY</th>
                    <th colspan="3" rowspan="3">NUMBER AFFECTED</th>
                    <th colspan="2" rowspan="3">NUMBER OF ECs</th>
                    <th colspan="4">SERVED</th>
                    <th colspan="4" rowspan="3">TOTAL SERVED</th>
                </tr>
                <tr>
                    <th colspan="4">Inside E.C</th>
                </tr>
                <tr>
                    <th>Families</th>
                    <th>Persons</th>

                    <th>Families</th>
                    <th>Persons</th>
                </tr>
                <tr>
                    <th>Barangay</th>
                    <th>Families</th>
                    <th>Persons</th>

                    <th>Cum</th>
                    <th>Now</th>

                    <th>Cum</th>
                    <th>Now</th>

                    <th>Cum</th>
                    <th>Now</th>

                    <th>Cum</th>
                    <th>Now</th>

                    <th>Cum</th>
                    <th>Now</th>
                </tr>

            </thead>

            <tbody>
                <tr>
                    <td>Barangay A</td>
                    <td>50</td>
                    <td>60</td>
                    <td>30</td>
                    <td>80</td>
                    <td>10</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                </tr>
                <tr>
                    <td>Barangay B</td>
                    <td>50</td>
                    <td>60</td>
                    <td>30</td>
                    <td>80</td>
                    <td>10</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                </tr>
                <tr>
                    <td>Barangay B</td>
                    <td>50</td>
                    <td>60</td>
                    <td>30</td>
                    <td>80</td>
                    <td>10</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                    <td>20</td>
                </tr>
            </tbody>

            <tfoot>
                <tr>
                    <th>SUB-TOTAL</th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<div class="content">
    <a class="btn btn-secondary" href="\Disaster\Profile\Index">Go Back</a>
    <button class="btn btn-primary" id="button">Generate PDF</button>
</div>

<script>
    // Function to generate a PDF
    function generatePDF() {
        const doc = new jsPDF(); // Create a new jsPDF instance

        // Define the HTML content you want to convert to a PDF
        const source = document.getElementById("makepdf");

        // Options for the PDF conversion
        const options = {
            margin: 10,
            filename: "disaster_report.pdf",
            image: { type: "jpeg", quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: "mm", format: "letter", orientation: "landscape" }
        };

        // Use html2pdf library to convert HTML to PDF
        html2pdf().from(source).set(options).outputPdf(pdf => {
            doc.save(options.filename);
        });
    }

    // Attach the generatePDF function to the button click event
    const generateButton = document.getElementById("button");
    generateButton.addEventListener("click", generatePDF);
</script>
