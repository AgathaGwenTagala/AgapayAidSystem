@page
@model AgapayAidSystem.Pages.Disaster.Profile.reliefgoodspack.ViewModel
@{
    ViewData["Title"] = "Pack Inclusions";
}

<!-- Alert Banners -->
@if (!string.IsNullOrEmpty(Model.errorMessage))
{
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 1000;">
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <strong>Error: @Model.errorMessage</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
}

@if (!string.IsNullOrEmpty(Request.Query["errorMessage"]))
{
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 1000;">
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <strong>Error: @Request.Query["errorMessage"]</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
}

<div class="container p-2">
    <!-- Breadcrumb -->


    <!-- Title -->
    <div class="row">
        <div class="col d-flex align-items-center">
            <h1>Pack Inclusions</h1>
        </div>
    </div>

    <!-- Table -->
    <div class="row">
        <div class="col-lg-12">
            <table id="pack-inclusion" class="table display compact order-column table-hover" cellspacing="0" width="100%">
                <thead>
                    <tr style="vertical-align:text-top;">
                        <th style="text-align:center;">#</th>
                        <th style="text-align:left;">Item</th>
                        <th style="text-align:center;">Type<br /></th>
                        <th style="text-align:center;">Qty per Pack</th>
                        <th style="text-align:center;">Total Qty</th>
                        <th style="text-align:center;">Unit Measure<br /></th>
                    </tr>
                </thead>
                <tbody>
                    @{ var counter = 1; }
                    @foreach (var item in Model.listPackInclusion)
                    {
                        <tr style="text-align:center;">
                            <td width="5%">@counter</td>
                            <th width="25%" style="text-align:left;">@item.itemName</th>
                            <td width="15%">@item.itemType</td>
                            <td width="15%">@item.qty</td>
                            <td width="15%">@item.totalQty</td>
                            <td width="25%">@item.unitMeasure</td>
                        </tr>
                        counter++;
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Making the table responsive -->
<script>
    $(document).ready(function () {
        var table = $('#pack-inclusion').DataTable({
            responsive: true,
            columnDefs: [
                { "orderable": true, "targets": [0, 1, 2, 3, 4, 5] }, // Sortable columns
                { "orderable": false, "targets": [] } // Non-sortable columns
            ]
        });

        // Adding filters to specific columns
        table.columns([2, 5]).every(function () {
            var column = this;
            var select = $('<select><option value=""></option></select>')
                .appendTo($(column.header()))
                .on('change', function () {
                    var val = $.fn.dataTable.util.escapeRegex(
                        $(this).val()
                    );

                    column
                        .search(val ? '^' + val + '$' : '', true, false)
                        .draw();
                });

            column.data().unique().sort().each(function (d, j) {
                select.append('<option value="' + d + '">' + d + '</option>');
            });
        });
    });
</script>