@page
@model AgapayAidSystem.Pages.family.profile.vulnerability.ViewModel
@{
	ViewData["Title"] = "View Vulnerability Assessment";
}

@if (Model.UserType == "Admin")
{
	Layout = "_Layout";
}
else if (Model.UserType == "LGU Staff")
{
	Layout = "_Layout - LGU";
}
else if (Model.UserType == "EC Staff")
{
	Layout = "_Layout - ECStaff";
}
else
{
	Layout = "_Login";
}

<!-- Alert Banners -->
@if (!string.IsNullOrEmpty(Model.errorMessage))
{
	<div class="position-fixed top-0 end-0 p-3" style="z-index: 1000;">
		<div class="alert alert-warning alert-dismissible fade show" role="alert">
			<strong>Error: @Model.errorMessage</strong>
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	</div>
}

@if (!string.IsNullOrEmpty(Request.Query["errorMessage"]))
{
	<div class="position-fixed top-0 end-0 p-3" style="z-index: 1000;">
		<div class="alert alert-warning alert-dismissible fade show" role="alert">
			<strong>Error: @Request.Query["errorMessage"]</strong>
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	</div>
}

<style>
	table {
		border-collapse: separate;
		border-spacing: 0 10px;
	}

	td {
		padding-right: 20px;
	}

	.additional-info {
		font-style: italic;
	}
</style>

<div class="bg-light rounded px-2 py-0 my-3">
	<div class="container p-4">
		<input type="hidden" name="familyID" value="@Model.familyInfo.familyID" />


		<!-- Back Button -->
		<div class="row">
			<div class="col">
				<a class="btn btn-primary mb-2" href="/family/profile/vulnerability/index?familyID=@Model.familyInfo.familyID">
					<i class="bi bi-arrow-left-circle"></i> Go Back
				</a>
			</div>
		</div>

		<h1 class="display-5 fw-bold text-center pt-5">Vulnerability Assessment Index</h1>

		<p class="additional-info">
			This vulnerability assessment form is sourced from page 22 of
			<a href="https://www.dswd.gov.ph/issuances/MCs/MC_2021-013.pdf?fbclid=IwAR0jL8e_0ZgO2pFLCZdSWCChBuxjjqxWKYIv0EB2zQfsidB-vQpPR9CCJGo" target="_blank">
				Memorandum Circular No. 13, Series of 2021 Guidelines in the Implementation of Relief Aid thru Cash Voucher in Disasters and Emergencies (RACVoDE)
			</a>
			and is provided here for reference and attribution purposes on our website.
		</p>

		<br />

		<div class=" d-flex align-items-center justify-content-center">
			<table class="text-center">
				<thead>
					<tr>
						<th>Score</th>
						<th> </th>
						<th>Vulnerability Level</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="pe-0">0 - 9</td>
						<td> </td>
						<td class="pe-0">Low</td>
					</tr>
					<tr>
						<td class="pe-0">10 - 18</td>
						<td> </td>
						<td>Medium</td>
					</tr>
					<tr>
						<td class="pe-0">19 - 27</td>
						<td> </td>
						<td class="pe-0">High</td>
					</tr>
				</tbody>
			</table>
		</div>

		<br />

		<div class="row">
			<div class="col-lg-6 col-md-6">
				<h4>Disaster Information</h4>
				<p>
					<b>Disaster</b><br />
					@Model.assessInfo.disasterName
				</p>
				<p>
					<b>Evacuation Center</b><br />
					@Model.assessInfo.centerName
				</p>
			</div>
			<div class="col-lg-6 col-md-6">
				<h4>Assessment Information</h4>
				<p>
					<b>Total Score</b><br />
					@Model.assessInfo.totalScore/27
				</p>
				<p>
					<b>Vulnerability Level</b><br />
					@Model.assessInfo.vulnerabilityLevel
				</p>
			</div>
		</div>
		<br />

		<!-- Primary -->
		<div class="col d-flex align-items-center">
			<h4>Primary Indicators</h4>
		</div>

		<div class="col d-flex align-items-center">
			<h6><small>(Yes - 2 / No - 0)</small></h6>
		</div>

		<table style="width:100%">
			<tbody>
				@{ var counter = 1; }
				@foreach (var item in Model.listAnswer1)
				{
					<tr>
						<td width="2%">@counter.</td>
						<td>
							@item.questionText
						</td>
						<td width="7%">
							@if (@item.answer == "Yes")
							{
								<input type="radio" class="radio-group" value="Yes" checked>

								<text>Yes</text>
							}
							else if (@item.answer == "No")
							{
								<input type="radio" class="radio-group" value="Yes" disabled>

								<text>Yes</text>
							}
						</td>
						<td width="7%">
							@if (@item.answer == "No")
							{
								<input type="radio" class="radio-group" value="No" checked>

								<text>No</text>
							}
							else if (@item.answer == "Yes")
							{
								<input type="radio" class="radio-group" value="No" disabled>

								<text>No</text>
							}
						</td>
					</tr>
					counter++;
				}
		</table>
		<br />

		<!-- Secondary -->
		<div class="col d-flex align-items-center">
			<h4>Secondary Indicators</h4>
		</div>

		<div class="col d-flex align-items-center">
			<h6><small>(Yes - 1 / No - 0)</small></h6>
		</div>

		<table style="width:100%">
			<tbody>
				@{ var counter2 = 1; }
				@foreach (var item in Model.listAnswer2)
				{
					<tr>
						<td width="2%">@counter2.</td>
						<td>
							@item.questionText
						</td>
						<td width="7%">
							@if (@item.answer == "Yes")
							{
								<input type="radio" class="radio-group" value="Yes" checked>

								<text>Yes</text>
							}
							else if (@item.answer == "No")
							{
								<input type="radio" class="radio-group" value="Yes" disabled>

								<text>Yes</text>
							}
						</td>
						<td width="7%">
							@if (@item.answer == "No")
							{
								<input type="radio" class="radio-group" value="No" checked>

								<text>No</text>
							}
							else if (@item.answer == "Yes")
							{
								<input type="radio" class="radio-group" value="No" disabled>

								<text>No</text>
							}
						</td>
					</tr>
					counter2++;
				}
		</table>
	</div>
</div>
