@page
@model AgapayAidSystem.Pages.disaster.profile.entrylog.IndexModel
@{
	ViewData["Title"] = "Entry Log";
	Layout = "_DisasterProfile";
}

<!-- Alert Banners -->
@if (!string.IsNullOrEmpty(Request.Query["successMessage"]))
{
	<div id="success-notification" class="position-fixed top-0 end-0 p-3" style="z-index: 1000;">
		<div class="alert alert-success alert-dismissible fade show" role="alert">
			<strong>@Request.Query["successMessage"]</strong>
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	</div>

	<script>
		const successNotification = document.getElementById('success-notification');
		if (successNotification) {
			setTimeout(function () {
				successNotification.style.display = 'none';
			}, 5000); // 5000 milliseconds = 5 seconds
		}
	</script>
}

@if (!string.IsNullOrEmpty(Model.errorMessage))
{
	<div class="position-fixed top-0 end-0 p-3" style="z-index: 1000;">
		<div class="alert alert-warning alert-dismissible fade show" role="alert">
			<strong>Error: @Model.errorMessage</strong>
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	</div>
}

@if (!string.IsNullOrEmpty(Request.Query["errorMessage"]))
{
	<div class="position-fixed top-0 end-0 p-3" style="z-index: 1000;">
		<div class="alert alert-warning alert-dismissible fade show" role="alert">
			<strong>Error: @Request.Query["errorMessage"]</strong>
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	</div>
}

<div class="container p-2">
	<div class="row">
		<ul class="breadcrumbs">
			<li><a href="/disaster/index">Disaster</a></li>
			<li class="divider">/</li>
			<li><a href="/disaster/profile/index?disasterID=@Model.logInfo.disasterID">@Model.logInfo.disasterName</a></li>
			<li class="divider">/</li>
			<li><a href="#" class="active">@Model.logInfo.centerName</a></li>
		</ul>
	</div>

	<!-- Search Bar -->
	<form id="search-form" class="pb-5">
		<div class="input-group">
			<input type="search" class="form-control ds-input" id="search-bar" placeholder="Search Evacuee" aria-label="Search..." autocomplete="off" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;">
			<button type="submit" class="btn btn-primary" id="search-button"><i class="bi bi-search"></i></button>
		</div>
	</form>

	<div class="row">
		<div class="col d-flex align-items-center">
			<h1>Entry Log</h1>
		</div>

		<div class="col-auto d-flex justify-content-between align-items-center" style="gap: 5px">
			<a class="btn btn-primary mb-2" href="/disaster/profile/entrylog/checkin">
				<i class="bi bi-plus-circle pt" style="padding: 5px;"></i> Check-In Evacuee
			</a>
			<button type="button" class="btn btn-primary mb-2" name="saveSelection" data-bs-toggle="modal" data-bs-target="#confirmSaveModal" disabled>
				Check-Out Evacuee
			</button>
		</div>
	</div>

	<div class="table-responsive pt-3">
		<table class="table align-middle table-hover" style="width:100%">
			<thead>
				<tr>
					<th></th>
					<th>Family</th>
					<th>Name</th>
					<th>Check-in Date</th>
					<th>Check-out Date</th>
					<th>Status</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr class="data-row clickable-row">
					<td width="5%">
						<div class="form-check">
							<input class="form-check-input" type="checkbox">
							<label class="form-check-label"></label>
						</div>
					</td>
					<td width="15%">EVC0000001</td>
					<td width="30%">Juanito Santos</td>
					<td width="15%">08/21/2023</td>
					<td width="15%">08/30/2023</td>
					<td width="15%">
						<span class="badge bg-success">Active</span>
					</td>
					<td width="10%">
						<div class="d-inline position-relative">
							<a href="#" role="button" id="recordOptions" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="bi bi-three-dots-vertical"></i>
							</a>
							<ul class="dropdown-menu" aria-labelledby="recordOptions">
								<li><a class="dropdown-item" href="#">View Family Profile</a></li>
								<li><a class="dropdown-item" href="#" onclick="confirmDelete();">Delete Entry Log</a></li>
							</ul>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<!-- Modal: Confirm Delete -->
<div class="modal" id="deleteConfirmationModal" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Confirm Delete</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				Are you sure you want to delete this entry log?
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-danger" id="confirmDeleteButton">Delete</button>
			</div>
		</div>
	</div>
</div>
