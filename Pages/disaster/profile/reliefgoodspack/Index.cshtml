@page
@model AgapayAidSystem.Pages.disaster.profile.reliefgoodspack.IndexModel
@{
	ViewData["Title"] = "Relief Packs";
}

<div class="container-fluid">

	<!--SIDEBAR-->

	<!-- Page Content -->
	<div class="col-md-9 ms-sm-auto col-lg-10 px-md-4 pb-3 pt-3">
		<div class="container p-2">
			<!-- Breadcrumb -->
			<div class="row pb-2" aria-label="breadcrumb">
				<nav style="--bs-breadcrumb-divider: '/';" aria-label="breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="/index"><i class="bi bi-house-door-fill" style="padding: 5px;"></i>Home</a></l>
						<li class="breadcrumb-item"><a href="/disaster/index">Disaster</a></li>
						<li class="breadcrumb-item"><a href="/disaster/profile"></a>Typhoon Pedro</li>
						<li class="breadcrumb-item active"><a><strong>Sample Evacuation Center</strong></a></li>
					</ol>
				</nav>
			</div>

			<div class="row pb-2">
				<div class="col-12 d-flex justify-content-between align-items-center" style="gap: 5px">
					<div class="d-flex align-items-center">
						<h1><i class="bi bi-boxes"></i>Relief Pack</h1>
					</div>

					<a id="addPack" class="btn btn-primary mb-2" href="/disaster/profile/reliefgoodspacl/Add">
						<i class="bi bi-plus-circle pt" style="padding: 5px;"></i> Add Pack
					</a>
				</div>
			</div>

			<!-- Table -->
			<div class="col-lg-12">
				<table id="disaster-table" class="table display compact order-column table-hover" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th width="5%">#</th>
							<th width="20%">Pack ID</th>
							<th width="15%">Staff ID</th>
							<th width="15%">Qty</th>
							<th width="15%">Distributed ID</th>
							<th width="15%">Not Distributed</th>
							<th width="10%">Status</th>
							<th> </th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td width="5%">1</td>
							<th width="15%">PCK00000107</th>
							<td width="15%">ECS0000005</td>
							<td width="15%">100</td>
							<td width="15%">100</td>
							<td width="15%">0</td>
							<td width="10%">
								<span class="badge bg-success">Distributed</span>
							</td>
							<td>
								<div class="d-flex align-items-center" style="gap: 5px">
									<div class="d-inline position-relative">
										<a href="#" role="button" id="recordOptions" data-bs-toggle="dropdown" aria-expanded="false">
											<i class="bi bi-three-dots-vertical"></i>
										</a>
										<ul class="dropdown-menu" aria-labelledby="recordOptions">
											<li><a href="#" class="dropdown-item">Edit</a></li>
											<li><a href="#" class="dropdown-item text-danger">Delete</a></li>
											<li><a href="/disaster/view" class="dropdown-item">View Inclusion</a></li>
										</ul>
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<!-- Modal: Confirm Delete -->
<div class="modal" id="deleteConfirmationModal" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Confirm Delete</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p>Are you sure you want to delete this pack?</p>
				<p><strong class="text-danger">This cannot be undone.</strong></p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-danger" id="confirmDeleteButton">Delete</button>
			</div>
		</div>
	</div>
</div>

<!-- Sidebar (Mobile) -->
<script>
	// Get the current page URL
	var currentPage = window.location.pathname.toLowerCase();

	// Get the select element
	var pageSelect = document.getElementById('pageSelect');

	// Loop through the options and set the selected attribute if it matches the current page
	for (var i = 0; i < pageSelect.options.length; i++) {
		if (pageSelect.options[i].value.toLowerCase().includes(currentPage)) {
			pageSelect.options[i].selected = true;
			break; // Exit the loop once the first match is found
		}
	}

	// Function to handle page redirection
	function redirectToSelectedPage() {
		var selectedOption = pageSelect.options[pageSelect.selectedIndex];
		var selectedValue = selectedOption.value;
		window.location.href = selectedValue;
	}

	// Attach the onchange event to the select element
	pageSelect.addEventListener('change', redirectToSelectedPage);
</script>

<!-- Making the table responsive -->
<script>
	$(document).ready(function () {
		$('#reliefpack-table').DataTable({
			responsive: true,
			columnDefs: [
				{ "orderable": true, "targets": [1, 2, 3] }, // Sortable columns
				{ "orderable": false, "targets": [0, 4, 5] } // Non-sortable columns
			]
		});
	});
</script>